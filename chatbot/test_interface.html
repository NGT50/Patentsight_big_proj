<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íŠ¹í—ˆ ì±—ë´‡ í…ŒìŠ¤íŠ¸ ì¸í„°í˜ì´ìŠ¤</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 30px;
        }

        .test-section {
            margin-bottom: 40px;
        }

        .section-title {
            font-size: 1.8em;
            color: #333;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        .test-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .test-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .test-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }

        .test-button:active {
            transform: translateY(-1px);
        }

        .test-info {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 5px solid #667eea;
        }

        .test-info h3 {
            color: #333;
            margin-bottom: 10px;
        }

        .test-info p {
            color: #666;
            line-height: 1.6;
        }

        .chat-area {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            max-height: 400px;
            overflow-y: auto;
        }

        .message {
            margin-bottom: 15px;
            padding: 15px;
            border-radius: 10px;
            max-width: 80%;
        }

        .message.user {
            background: #667eea;
            color: white;
            margin-left: auto;
        }

        .message.bot {
            background: white;
            color: #333;
            border: 1px solid #ddd;
        }

        .message-time {
            font-size: 0.8em;
            opacity: 0.7;
            margin-top: 5px;
        }

        .status {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-weight: 600;
        }

        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .status.loading {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .api-status {
            background: #e2e3e5;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .api-status h3 {
            margin-bottom: 10px;
            color: #333;
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-indicator.online {
            background: #28a745;
        }

        .status-indicator.offline {
            background: #dc3545;
        }

        .manual-input {
            background: white;
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .manual-input h3 {
            margin-bottom: 15px;
            color: #333;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #333;
        }

        .input-group input, .input-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }

        .input-group textarea {
            height: 100px;
            resize: vertical;
        }

        .send-button {
            background: #28a745;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
        }

        .send-button:hover {
            background: #218838;
        }

        .clear-button {
            background: #6c757d;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            margin-left: 10px;
        }

        .clear-button:hover {
            background: #5a6268;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¤– íŠ¹í—ˆ ì±—ë´‡ í…ŒìŠ¤íŠ¸ ì¸í„°í˜ì´ìŠ¤</h1>
            <p>LangGraph ê¸°ë°˜ íŠ¹í—ˆ ë¶„ì„ ì±—ë´‡ í…ŒìŠ¤íŠ¸ ë„êµ¬</p>
        </div>

        <div class="content">
            <!-- API ìƒíƒœ í™•ì¸ -->
            <div class="api-status">
                <h3>ğŸ”— API ì„œë²„ ìƒíƒœ</h3>
                <div>
                    <span class="status-indicator" id="chatbotStatus">â—</span>
                    <span id="chatbotStatusText">ì±—ë´‡ ì„œë²„ í™•ì¸ ì¤‘...</span>
                </div>
                <div style="margin-top: 10px;">
                    <span class="status-indicator" id="aiModelStatus">â—</span>
                    <span id="aiModelStatusText">AI ëª¨ë¸ ì„œë²„ í™•ì¸ ì¤‘...</span>
                </div>
            </div>

            <!-- ë¹ ë¥¸ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ë“¤ -->
            <div class="test-section">
                <h2 class="section-title">ğŸš€ ë¹ ë¥¸ í…ŒìŠ¤íŠ¸</h2>
                <div class="test-info">
                    <h3>ì‚¬ìš© ë°©ë²•</h3>
                    <p>ì•„ë˜ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ë¯¸ë¦¬ ì¤€ë¹„ëœ í…ŒìŠ¤íŠ¸ ë°ì´í„°ë¡œ ì±—ë´‡ì„ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê° ë²„íŠ¼ì€ ë‹¤ë¥¸ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.</p>
                </div>
                <div class="test-buttons" id="quickTestButtons">
                    <!-- ë²„íŠ¼ë“¤ì´ JavaScriptë¡œ ë™ì  ìƒì„±ë©ë‹ˆë‹¤ -->
                </div>
            </div>

            <!-- ìˆ˜ë™ ì…ë ¥ í…ŒìŠ¤íŠ¸ -->
            <div class="test-section">
                <h2 class="section-title">âœï¸ ìˆ˜ë™ ì…ë ¥ í…ŒìŠ¤íŠ¸</h2>
                <div class="test-info">
                    <h3>ì‚¬ìš©ì ì •ì˜ í…ŒìŠ¤íŠ¸</h3>
                    <p>ì§ì ‘ ë©”ì‹œì§€ì™€ íŠ¹í—ˆ ë°ì´í„°ë¥¼ ì…ë ¥í•´ì„œ ì±—ë´‡ì„ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                </div>
                <div class="manual-input">
                    <div class="input-group">
                        <label for="userMessage">ì‚¬ìš©ì ë©”ì‹œì§€:</label>
                        <input type="text" id="userMessage" placeholder="ì˜ˆ: ì¸ê³µì§€ëŠ¥ íŠ¹í—ˆ ê²€ìƒ‰ ì‹œìŠ¤í…œì— ëŒ€í•œ ìœ ì‚¬ íŠ¹í—ˆë¥¼ ì°¾ì•„ì¤˜">
                    </div>
                    <div class="input-group">
                        <label for="applicationText">ì¶œì›ì„œ ë‚´ìš©:</label>
                        <textarea id="applicationText" placeholder="íŠ¹í—ˆ ì¶œì›ì„œì˜ ìƒì„¸ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
                    </div>
                    <div class="input-group">
                        <label for="claimsText">ì²­êµ¬í•­:</label>
                        <textarea id="claimsText" placeholder="ì²­êµ¬í•­ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
                    </div>
                    <button class="send-button" onclick="sendManualTest()">í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
                    <button class="clear-button" onclick="clearManualInput()">ì…ë ¥ ì´ˆê¸°í™”</button>
                </div>
            </div>

            <!-- ì±„íŒ… ì˜ì—­ -->
            <div class="test-section">
                <h2 class="section-title">ğŸ’¬ í…ŒìŠ¤íŠ¸ ê²°ê³¼</h2>
                <div class="chat-area" id="chatArea">
                    <div class="message bot">
                        <div>ì•ˆë…•í•˜ì„¸ìš”! íŠ¹í—ˆ ì±—ë´‡ í…ŒìŠ¤íŠ¸ ì¸í„°í˜ì´ìŠ¤ì…ë‹ˆë‹¤. ìœ„ì˜ ë²„íŠ¼ì„ í´ë¦­í•˜ê±°ë‚˜ ìˆ˜ë™ìœ¼ë¡œ ì…ë ¥í•´ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹œì‘í•´ë³´ì„¸ìš”.</div>
                        <div class="message-time">ì§€ê¸ˆ</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // í…ŒìŠ¤íŠ¸ ë°ì´í„°
        const testData = {
            "quick_test_buttons": [
                {
                    "id": "test_similar_1",
                    "label": "ğŸ¤– AI íŠ¹í—ˆ ê²€ìƒ‰ í…ŒìŠ¤íŠ¸",
                    "message": "ì¸ê³µì§€ëŠ¥ì„ ì´ìš©í•œ íŠ¹í—ˆ ê²€ìƒ‰ ì‹œìŠ¤í…œì— ëŒ€í•œ ìœ ì‚¬ íŠ¹í—ˆë¥¼ ì°¾ì•„ì¤˜",
                    "application_text": "ë³¸ ë°œëª…ì€ ì¸ê³µì§€ëŠ¥ì„ ì´ìš©í•œ íŠ¹í—ˆ ê²€ìƒ‰ ì‹œìŠ¤í…œì— ê´€í•œ ê²ƒì´ë‹¤. ì´ ì‹œìŠ¤í…œì€ ê¸°ì¡´ì˜ ìˆ˜ë™ ê²€ìƒ‰ ë°©ì‹ì˜ í•œê³„ë¥¼ ê·¹ë³µí•˜ê³ , ëŒ€ìš©ëŸ‰ íŠ¹í—ˆ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ê´€ë ¨ íŠ¹í—ˆë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì°¾ì•„ë‚´ëŠ” ê²ƒì„ ëª©ì ìœ¼ë¡œ í•œë‹¤. ë”¥ëŸ¬ë‹ ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ì—¬ íŠ¹í—ˆ ë¬¸ì„œì˜ ì˜ë¯¸ë¥¼ ë¶„ì„í•˜ê³ , ì‚¬ìš©ìì˜ ê²€ìƒ‰ ì˜ë„ë¥¼ ì´í•´í•˜ì—¬ ê´€ë ¨ì„±ì´ ë†’ì€ íŠ¹í—ˆë¥¼ ì¶”ì²œí•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.",
                    "claims_text": "1. ì¸ê³µì§€ëŠ¥ì„ ì´ìš©í•œ íŠ¹í—ˆ ê²€ìƒ‰ ì‹œìŠ¤í…œìœ¼ë¡œì„œ, ê²€ìƒ‰ ì—”ì§„ê³¼ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ í¬í•¨í•˜ëŠ” ì‹œìŠ¤í…œ. 2. ì „í•­ì˜ ì‹œìŠ¤í…œì— ìˆì–´ì„œ, ë”¥ëŸ¬ë‹ ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ íŠ¹ì§•ìœ¼ë¡œ í•˜ëŠ” ì‹œìŠ¤í…œ. 3. ì „í•­ì˜ ì‹œìŠ¤í…œì— ìˆì–´ì„œ, ìì—°ì–´ ì²˜ë¦¬ ê¸°ëŠ¥ì„ í¬í•¨í•˜ëŠ” ê²ƒì„ íŠ¹ì§•ìœ¼ë¡œ í•˜ëŠ” ì‹œìŠ¤í…œ."
                },
                {
                    "id": "test_similar_2", 
                    "label": "ğŸ”— ë¸”ë¡ì²´ì¸ íŠ¹í—ˆ í…ŒìŠ¤íŠ¸",
                    "message": "ë¸”ë¡ì²´ì¸ì„ ì´ìš©í•œ íŠ¹í—ˆ ê´€ë¦¬ ì‹œìŠ¤í…œê³¼ ìœ ì‚¬í•œ íŠ¹í—ˆê°€ ìˆëŠ”ì§€ ê²€ìƒ‰í•´ì¤˜",
                    "application_text": "ë³¸ ë°œëª…ì€ ë¸”ë¡ì²´ì¸ ê¸°ìˆ ì„ í™œìš©í•œ íŠ¹í—ˆ ê´€ë¦¬ ì‹œìŠ¤í…œì— ê´€í•œ ê²ƒì´ë‹¤. íŠ¹í—ˆì˜ ì¶œì›ë¶€í„° ë“±ë¡, ì´ì „, ë¼ì´ì„¼ì‹±ê¹Œì§€ì˜ ëª¨ë“  ê³¼ì •ì„ ë¸”ë¡ì²´ì¸ì— ê¸°ë¡í•˜ì—¬ íˆ¬ëª…ì„±ê³¼ ë¶ˆë³€ì„±ì„ ë³´ì¥í•œë‹¤. ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ë¥¼ í†µí•´ ìë™í™”ëœ íŠ¹í—ˆ ê´€ë¦¬ í”„ë¡œì„¸ìŠ¤ë¥¼ êµ¬í˜„í•˜ê³ , ë¶„ì‚° ì›ì¥ ê¸°ìˆ ì„ í†µí•´ íŠ¹í—ˆ ì •ë³´ì˜ ë¬´ê²°ì„±ì„ ìœ ì§€í•œë‹¤.",
                    "claims_text": "1. ë¸”ë¡ì²´ì¸ ê¸°ë°˜ íŠ¹í—ˆ ê´€ë¦¬ ì‹œìŠ¤í…œìœ¼ë¡œì„œ, ë¶„ì‚° ì›ì¥ê³¼ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ë¥¼ í¬í•¨í•˜ëŠ” ì‹œìŠ¤í…œ. 2. ì „í•­ì˜ ì‹œìŠ¤í…œì— ìˆì–´ì„œ, íŠ¹í—ˆ ì •ë³´ì˜ ë¬´ê²°ì„±ì„ ë³´ì¥í•˜ëŠ” ê²ƒì„ íŠ¹ì§•ìœ¼ë¡œ í•˜ëŠ” ì‹œìŠ¤í…œ. 3. ì „í•­ì˜ ì‹œìŠ¤í…œì— ìˆì–´ì„œ, ìë™í™”ëœ ë¼ì´ì„¼ì‹± í”„ë¡œì„¸ìŠ¤ë¥¼ í¬í•¨í•˜ëŠ” ê²ƒì„ íŠ¹ì§•ìœ¼ë¡œ í•˜ëŠ” ì‹œìŠ¤í…œ."
                },
                {
                    "id": "test_similar_3",
                    "label": "ğŸ  IoT ìŠ¤ë§ˆíŠ¸í™ˆ í…ŒìŠ¤íŠ¸", 
                    "message": "IoTë¥¼ ì´ìš©í•œ ìŠ¤ë§ˆíŠ¸ í™ˆ ì‹œìŠ¤í…œì˜ ìœ ì‚¬ íŠ¹í—ˆë¥¼ ê²€ìƒ‰í•´ì¤˜",
                    "application_text": "ë³¸ ë°œëª…ì€ IoT ê¸°ìˆ ì„ í™œìš©í•œ ìŠ¤ë§ˆíŠ¸ í™ˆ ì‹œìŠ¤í…œì— ê´€í•œ ê²ƒì´ë‹¤. ë‹¤ì–‘í•œ ì„¼ì„œì™€ ì•¡ì¶”ì—ì´í„°ë¥¼ í†µí•´ ê°€ì • ë‚´ í™˜ê²½ì„ ëª¨ë‹ˆí„°ë§í•˜ê³  ì œì–´í•œë‹¤. ë¨¸ì‹ ëŸ¬ë‹ ì•Œê³ ë¦¬ì¦˜ì„ í†µí•´ ì‚¬ìš©ìì˜ ìƒí™œ íŒ¨í„´ì„ í•™ìŠµí•˜ê³ , ìë™í™”ëœ í™ˆ ê´€ë¦¬ë¥¼ ì œê³µí•œë‹¤. ëª¨ë°”ì¼ ì•±ì„ í†µí•´ ì›ê²©ìœ¼ë¡œ í™ˆ ì‹œìŠ¤í…œì„ ì œì–´í•  ìˆ˜ ìˆë‹¤.",
                    "claims_text": "1. IoT ê¸°ë°˜ ìŠ¤ë§ˆíŠ¸ í™ˆ ì‹œìŠ¤í…œìœ¼ë¡œì„œ, ì„¼ì„œ ë„¤íŠ¸ì›Œí¬ì™€ ì œì–´ ì‹œìŠ¤í…œì„ í¬í•¨í•˜ëŠ” ì‹œìŠ¤í…œ. 2. ì „í•­ì˜ ì‹œìŠ¤í…œì— ìˆì–´ì„œ, ë¨¸ì‹ ëŸ¬ë‹ ê¸°ë°˜ ìë™í™” ê¸°ëŠ¥ì„ í¬í•¨í•˜ëŠ” ê²ƒì„ íŠ¹ì§•ìœ¼ë¡œ í•˜ëŠ” ì‹œìŠ¤í…œ. 3. ì „í•­ì˜ ì‹œìŠ¤í…œì— ìˆì–´ì„œ, ëª¨ë°”ì¼ ì›ê²© ì œì–´ ê¸°ëŠ¥ì„ í¬í•¨í•˜ëŠ” ê²ƒì„ íŠ¹ì§•ìœ¼ë¡œ í•˜ëŠ” ì‹œìŠ¤í…œ."
                },
                {
                    "id": "test_rejection_1",
                    "label": "âŒ ì˜¤ë¥˜ ë¬¸ì„œ ê±°ì ˆì‚¬ìœ  í…ŒìŠ¤íŠ¸",
                    "message": "ì´ íŠ¹í—ˆì— ëŒ€í•œ ê±°ì ˆì‚¬ìœ ë¥¼ ë¶„ì„í•´ì¤˜",
                    "application_text": "ë³¸ ë°œëª…ì€ ì¸ê³µì§€ëˆ™ì„ ì´ìš©í•œ íŠ¹í—ˆ ê²€ìƒ‰ ì‹œìŠ¤í…œì— ê´€í•œ ê²ƒì´ë‹¤. ì´ ì‹œìŠˆí…œì€ ê¸°ì¡´ì˜ ìˆ˜ë™ ê²€ìƒ‰ ë°©ì‹ì˜ í•œê³„ë¥¼ ê·¹ë³µí•˜ê³ , ëŒ€ìš©ëŸ‰ íŠ¹í—ˆ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ê´€ë ¨ íŠ¹í—ˆë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì°¾ì•„ë‚´ëŠ” ê²ƒì„ ëª©ì ìœ¼ë¡œ í•œë‹¤. ë°°ê²½ê¸°ìˆ  ì„¹ì…˜ì´ ëˆ„ë½ë˜ì–´ ìˆê³ , ê¸°ìˆ ì  íš¨ê³¼ê°€ ëª…í™•í•˜ì§€ ì•Šìœ¼ë©°, ì²­êµ¬í•­ì˜ êµ¬ì„±ìš”ì†Œê°€ ë¶ˆì™„ì „í•˜ë‹¤. ë˜í•œ ë°œëª…ì˜ ëª…ì¹­ì´ ë„ˆë¬´ ì¼ë°˜ì ì´ê³ , ë„ë©´ ì„¤ëª…ì´ ë¶€ì¡±í•˜ë©°, ì‹¤ì‹œì˜ˆê°€ êµ¬ì²´ì ì´ì§€ ì•Šë‹¤.",
                    "claims_text": "1. ì¸ê³µì§€ëˆ™ì„ ì´ìš©í•œ íŠ¹í—ˆ ê²€ìƒ‰ ì‹œìŠ¤í…œìœ¼ë¡œì„œ, ê²€ìƒ‰ ì—”ì§„ê³¼ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ í¬í•¨í•˜ëŠ” ì‹œìŠ¤í…œ. 2. ì „í•­ì˜ ì‹œìŠˆí…œì— ìˆì–´ì„œ, ë¨¸ì‹ ëŸ¬ë‹ ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ íŠ¹ì§•ìœ¼ë¡œ í•˜ëŠ” ì‹œìŠ¤í…œ. 3. ì „í•­ì˜ ì‹œìŠ¤í…œì— ìˆì–´ì„œ, ìì—°ì–´ ì²˜ë¦¬ ê¸°ëŠ¥ì„ í¬í•¨í•˜ëŠ” ê²ƒì„ íŠ¹ì§•ìœ¼ë¡œ í•˜ëŠ” ì‹œìŠ¤í…œ."
                },
                {
                    "id": "test_rejection_2",
                    "label": "ğŸ“± ê±´ê°•ëª¨ë‹ˆí„°ë§ ê±°ì ˆì‚¬ìœ  í…ŒìŠ¤íŠ¸",
                    "message": "ì´ íŠ¹í—ˆì˜ ê±°ì ˆ ê°€ëŠ¥ì„±ì„ ë¶„ì„í•´ì¤˜",
                    "application_text": "ë³¸ ë°œëª…ì€ ìŠ¤ë§ˆíŠ¸í°ì„ ì´ìš©í•œ ê±´ê°• ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œì— ê´€í•œ ê²ƒì´ë‹¤. ìŠ¤ë§ˆíŠ¸í°ì˜ ë‚´ì¥ ì„¼ì„œë¥¼ í™œìš©í•˜ì—¬ ì‚¬ìš©ìì˜ ê±¸ìŒ ìˆ˜, ì‹¬ë°•ìˆ˜, ìˆ˜ë©´ íŒ¨í„´ ë“±ì„ ì¸¡ì •í•˜ê³  ë¶„ì„í•œë‹¤. ì¸¡ì •ëœ ë°ì´í„°ëŠ” í´ë¼ìš°ë“œ ì„œë²„ì— ì €ì¥ë˜ë©°, ì˜ë£Œì§„ê³¼ ê³µìœ í•  ìˆ˜ ìˆë‹¤. ë¨¸ì‹ ëŸ¬ë‹ ì•Œê³ ë¦¬ì¦˜ì„ í†µí•´ ê±´ê°• ìƒíƒœë¥¼ ì˜ˆì¸¡í•˜ê³  ê°œì„  ë°©ì•ˆì„ ì œì‹œí•œë‹¤.",
                    "claims_text": "1. ìŠ¤ë§ˆíŠ¸í°ì„ ì´ìš©í•œ ê±´ê°• ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œìœ¼ë¡œì„œ, ë‚´ì¥ ì„¼ì„œì™€ ë¶„ì„ ëª¨ë“ˆì„ í¬í•¨í•˜ëŠ” ì‹œìŠ¤í…œ. 2. ì „í•­ì˜ ì‹œìŠ¤í…œì— ìˆì–´ì„œ, ê±¸ìŒ ìˆ˜, ì‹¬ë°•ìˆ˜, ìˆ˜ë©´ íŒ¨í„´ì„ ì¸¡ì •í•˜ëŠ” ê²ƒì„ íŠ¹ì§•ìœ¼ë¡œ í•˜ëŠ” ì‹œìŠ¤í…œ. 3. ì „í•­ì˜ ì‹œìŠ¤í…œì— ìˆì–´ì„œ, í´ë¼ìš°ë“œ ê¸°ë°˜ ë°ì´í„° ì €ì¥ ë° ê³µìœ  ê¸°ëŠ¥ì„ í¬í•¨í•˜ëŠ” ê²ƒì„ íŠ¹ì§•ìœ¼ë¡œ í•˜ëŠ” ì‹œìŠ¤í…œ."
                },
                {
                    "id": "test_rejection_3",
                    "label": "âš›ï¸ ì–‘ìì»´í“¨íŒ… ë“±ë¡ê°€ëŠ¥ì„± í…ŒìŠ¤íŠ¸",
                    "message": "ì´ íŠ¹í—ˆì˜ ë“±ë¡ ê°€ëŠ¥ì„±ì„ ë¶„ì„í•´ì¤˜",
                    "application_text": "ë³¸ ë°œëª…ì€ ì–‘ì ì»´í“¨íŒ…ì„ ì´ìš©í•œ ì•”í˜¸í™” íŠ¹í—ˆ ê²€ìƒ‰ ì‹œìŠ¤í…œì— ê´€í•œ ê²ƒì´ë‹¤. ì–‘ì ì•Œê³ ë¦¬ì¦˜ì„ í™œìš©í•˜ì—¬ ê¸°ì¡´ ì»´í“¨í„°ë¡œëŠ” í•´ê²°í•  ìˆ˜ ì—†ëŠ” ë³µì¡í•œ íŠ¹í—ˆ ê²€ìƒ‰ ë¬¸ì œë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•œë‹¤. ì–‘ì ì–½í˜ í˜„ìƒì„ ì´ìš©í•œ ë³‘ë ¬ ì²˜ë¦¬ë¡œ ëŒ€ìš©ëŸ‰ íŠ¹í—ˆ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ íŒ¨í„´ì„ ë¹ ë¥´ê²Œ ì°¾ì•„ë‚¸ë‹¤. ì–‘ì ë‚´ì„± ì•”í˜¸í™”ë¥¼ í†µí•´ ê²€ìƒ‰ ê²°ê³¼ì˜ ë³´ì•ˆì„±ì„ ë³´ì¥í•œë‹¤.",
                    "claims_text": "1. ì–‘ì ì»´í“¨íŒ…ì„ ì´ìš©í•œ ì•”í˜¸í™” íŠ¹í—ˆ ê²€ìƒ‰ ì‹œìŠ¤í…œìœ¼ë¡œì„œ, ì–‘ì ì•Œê³ ë¦¬ì¦˜ê³¼ ì–‘ì í”„ë¡œì„¸ì„œë¥¼ í¬í•¨í•˜ëŠ” ì‹œìŠ¤í…œ. 2. ì „í•­ì˜ ì‹œìŠ¤í…œì— ìˆì–´ì„œ, ì–‘ì ì–½í˜ ê¸°ë°˜ ë³‘ë ¬ ì²˜ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ íŠ¹ì§•ìœ¼ë¡œ í•˜ëŠ” ì‹œìŠ¤í…œ. 3. ì „í•­ì˜ ì‹œìŠ¤í…œì— ìˆì–´ì„œ, ì–‘ì ë‚´ì„± ì•”í˜¸í™” ê¸°ëŠ¥ì„ í¬í•¨í•˜ëŠ” ê²ƒì„ íŠ¹ì§•ìœ¼ë¡œ í•˜ëŠ” ì‹œìŠ¤í…œ."
                }
            ]
        };

        let sessionId = 'test_session_' + Date.now();

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.onload = function() {
            createTestButtons();
            checkApiStatus();
        };

        // í…ŒìŠ¤íŠ¸ ë²„íŠ¼ ìƒì„±
        function createTestButtons() {
            const container = document.getElementById('quickTestButtons');
            testData.quick_test_buttons.forEach(button => {
                const buttonElement = document.createElement('button');
                buttonElement.className = 'test-button';
                buttonElement.textContent = button.label;
                buttonElement.onclick = () => runQuickTest(button);
                container.appendChild(buttonElement);
            });
        }

        // API ìƒíƒœ í™•ì¸
        async function checkApiStatus() {
            // ì±—ë´‡ ì„œë²„ ìƒíƒœ í™•ì¸
            try {
                const response = await fetch('http://127.0.0.1:58080/chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        session_id: 'status_check',
                        user_msg: 'ì•ˆë…•í•˜ì„¸ìš”'
                    })
                });
                
                if (response.ok) {
                    updateStatus('chatbotStatus', 'online', 'ì±—ë´‡ ì„œë²„ ì˜¨ë¼ì¸');
                } else {
                    updateStatus('chatbotStatus', 'offline', 'ì±—ë´‡ ì„œë²„ ì˜¤í”„ë¼ì¸');
                }
            } catch (error) {
                updateStatus('chatbotStatus', 'offline', 'ì±—ë´‡ ì„œë²„ ì—°ê²° ì‹¤íŒ¨');
            }

            // AI ëª¨ë¸ ì„œë²„ ìƒíƒœ í™•ì¸ (ê°„ë‹¨í•œ ping)
            try {
                const response = await fetch('http://3.26.101.212:8000/api/ai/validations', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ test: 'ping' })
                });
                
                if (response.status !== 404) { // 404ëŠ” ì •ìƒ (ì˜ëª»ëœ ìš”ì²­ì´ì§€ë§Œ ì„œë²„ëŠ” ì‘ë‹µ)
                    updateStatus('aiModelStatus', 'online', 'AI ëª¨ë¸ ì„œë²„ ì˜¨ë¼ì¸');
                } else {
                    updateStatus('aiModelStatus', 'online', 'AI ëª¨ë¸ ì„œë²„ ì˜¨ë¼ì¸ (404ëŠ” ì •ìƒ)');
                }
            } catch (error) {
                updateStatus('aiModelStatus', 'offline', 'AI ëª¨ë¸ ì„œë²„ ì—°ê²° ì‹¤íŒ¨');
            }
        }

        function updateStatus(elementId, status, text) {
            const element = document.getElementById(elementId);
            const textElement = document.getElementById(elementId + 'Text');
            
            element.className = 'status-indicator ' + status;
            textElement.textContent = text;
        }

        // ë¹ ë¥¸ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
        async function runQuickTest(testData) {
            addMessage(testData.message, true);
            addStatus('í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì¤‘...', 'loading');

            try {
                const response = await fetch('http://127.0.0.1:58080/chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        session_id: sessionId,
                        user_msg: testData.message,
                        application_text: testData.application_text,
                        claims_text: testData.claims_text
                    })
                });

                if (response.ok) {
                    const result = await response.text();
                    addMessage(result, false);
                    addStatus('í…ŒìŠ¤íŠ¸ ì„±ê³µ!', 'success');
                } else {
                    throw new Error(`HTTP ${response.status}`);
                }
            } catch (error) {
                addMessage('í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message, false);
                addStatus('í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨', 'error');
            }
        }

        // ìˆ˜ë™ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
        async function sendManualTest() {
            const message = document.getElementById('userMessage').value.trim();
            const applicationText = document.getElementById('applicationText').value.trim();
            const claimsText = document.getElementById('claimsText').value.trim();

            if (!message) {
                alert('ì‚¬ìš©ì ë©”ì‹œì§€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            addMessage(message, true);
            addStatus('ìˆ˜ë™ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì¤‘...', 'loading');

            try {
                const response = await fetch('http://127.0.0.1:58080/chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        session_id: sessionId,
                        user_msg: message,
                        application_text: applicationText,
                        claims_text: claimsText
                    })
                });

                if (response.ok) {
                    const result = await response.text();
                    addMessage(result, false);
                    addStatus('ìˆ˜ë™ í…ŒìŠ¤íŠ¸ ì„±ê³µ!', 'success');
                } else {
                    throw new Error(`HTTP ${response.status}`);
                }
            } catch (error) {
                addMessage('ìˆ˜ë™ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message, false);
                addStatus('ìˆ˜ë™ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨', 'error');
            }
        }

        // ìˆ˜ë™ ì…ë ¥ ì´ˆê¸°í™”
        function clearManualInput() {
            document.getElementById('userMessage').value = '';
            document.getElementById('applicationText').value = '';
            document.getElementById('claimsText').value = '';
        }

        // ë©”ì‹œì§€ ì¶”ê°€
        function addMessage(content, isUser) {
            const chatArea = document.getElementById('chatArea');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user' : 'bot'}`;
            
            const contentDiv = document.createElement('div');
            contentDiv.innerHTML = content.replace(/\n/g, '<br>');
            messageDiv.appendChild(contentDiv);
            
            const timeDiv = document.createElement('div');
            timeDiv.className = 'message-time';
            timeDiv.textContent = new Date().toLocaleTimeString();
            messageDiv.appendChild(timeDiv);
            
            chatArea.appendChild(messageDiv);
            chatArea.scrollTop = chatArea.scrollHeight;
        }

        // ìƒíƒœ ë©”ì‹œì§€ ì¶”ê°€
        function addStatus(message, type) {
            const chatArea = document.getElementById('chatArea');
            const statusDiv = document.createElement('div');
            statusDiv.className = `status ${type}`;
            statusDiv.textContent = message;
            chatArea.appendChild(statusDiv);
            chatArea.scrollTop = chatArea.scrollHeight;
        }
    </script>
</body>
</html>
